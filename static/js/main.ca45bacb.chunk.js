(this.webpackJsonpbee_hive=this.webpackJsonpbee_hive||[]).push([[0],{82:function(e,t,i){},83:function(e,t,i){},88:function(e,t,i){"use strict";i.r(t);var r=i(0),n=i.n(r),o=i(10),s=i.n(o),a=(i(82),i.p,i(83),i(17)),l=i(19),u=i(123),d=i(127),c=i(128),h=i(4);var v=function(e){var t=e.feature;return Object(h.jsxs)("div",{style:{},children:[function(e){switch(e.name){case"Hive":return Object(h.jsx)(u.a,{});case"Danger":return Object(h.jsx)(d.a,{});case"Food":return Object(h.jsx)(c.a,{});default:return Object(h.jsx)("div",{})}}(e.feature)," ",Object(h.jsx)("div",{style:{fontSize:"xx-small",marginTop:"-5px"},children:function(){switch(t.name){case"Danger":return t.chance+"%\u2620";case"Food":return t.charges+"x\u2741";default:return""}}()})]})};var f=function(e){var t=e.numBees,i=(e.feature,e.xLoc+", "+e.yLoc),r=e.status,n=e.deadBees,o={parentDiv:{position:"relative",display:"flex",height:"50px",width:"50px",borderStyle:"solid",borderWidth:"1px",fontSize:"small"},beeDiv:{position:"absolute",top:0,right:0,fontSize:"x-small"},featureDiv:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},locationDiv:{position:"absolute",fontSize:"xx-small",left:0,bottom:0},deadBeeDiv:{position:"absolute",fontSize:"xx-small",right:0,bottom:0}};return Object(h.jsxs)("div",{style:function(){var e=o.parentDiv;switch(r){case"Hive":e.borderColor="Yellow",e.backgroundColor="\t#CC9900";break;case"BorderExplored":e.borderColor="Blue",e.backgroundColor="Green";break;case"Unexplored":e.borderColor="Blue";break;case"Explored":e.borderColor="White",e.backgroundColor="Grey"}return e}(),children:[t>0?Object(h.jsx)("div",{style:o.beeDiv,children:t+"x\ud80c\udda4"}):Object(h.jsx)("div",{}),Object(h.jsx)("div",{style:o.featureDiv,children:Object(h.jsx)(v,{feature:e.feature})}),Object(h.jsx)("div",{style:o.locationDiv,children:i}),n>0?Object(h.jsx)("div",{style:o.deadBeeDiv,children:n+"x\u2620"}):Object(h.jsx)("div",{})]},i)};var y=function(e){var t=e.gridModel.fullGridModel;return Object(h.jsx)("div",{children:function(){var e,i=[[]];for(var r in t){var n=[];for(var o in t[r])n.push((e=t[r][o],console.log("tile",e),Object(h.jsx)(f,{numBees:e.numBees,feature:e.feature,xLoc:e.xLoc,yLoc:e.yLoc,status:e.status,deadBees:e.deadBees},e.xLoc+"-"+e.yLoc)));i.push(Object(h.jsx)("div",{style:{display:"flex"},children:n}))}return i}()})},b=i(135),g=i(20),j=i(21),x=function(){function e(t,i){Object(g.a)(this,e),this.feature=!1,this.numBees=0,this.xLoc="",this.yLoc="",this.status="Unexplored",this.deadBees=0,this.feature=!1,this.numBees=0,this.xLoc=t,this.yLoc=i,this.deadBees=0}return Object(j.a)(e,[{key:"getFeature",get:function(){return this.feature}},{key:"setFeature",set:function(e){this.feature=e}},{key:"getNumBees",value:function(){return this.numBees}},{key:"setNumBees",set:function(e){this.numBees=e}},{key:"subtractFood",value:function(){this.feature.charges>0&&this.feature.charges--}},{key:"addBee",value:function(){this.numBees++}},{key:"removeBee",value:function(){this.numBees>0&&this.numBees--}},{key:"addDeadBee",value:function(){this.deadBees++}}]),e}(),p=function(){function e(t){Object(g.a)(this,e),this.maxHeight=t.height,this.maxWidth=t.width,this.numDanger=t.numDanger,this.numFood=t.numFood,t.seed&&(this.seed=t.seed),this.fullGridModel=this.generateBaseGridModel(t.height,t.width),this.gridAddFeatures(),this.updateBorderExploreTiles(this.fullGridModel)}return Object(j.a)(e,[{key:"generateBaseGridModel",value:function(e,t){for(var i=[],r=0;r<e;r++){i[r]=[];for(var n=0;n<t;n++)i[r][n]=new x(r,n)}return console.log("working grid",i),i}},{key:"gridAddFeatures",value:function(e,t,i,r){if(e>t*i-(r+1))return!1;if(r>t*i-(e+1))return!1;var n=[];for(var o in this.fullGridModel)for(var s in this.fullGridModel[o])!1===this.fullGridModel[o][s].feature&&n.push({x:o,y:s});this.gridAddHive(n),this.gridAddFood(n),this.gridAddDanger(n)}},{key:"gridAddFood",value:function(e){for(var t=0;t<this.numFood;t++){var i=Math.floor(Math.random()*e.length);this.fullGridModel[e[i].x][e[i].y].feature={name:"Food",charges:5},e.splice(i,1)}}},{key:"gridAddDanger",value:function(e){for(var t=0;t<this.numDanger;t++){var i=Math.floor(Math.random()*e.length);this.fullGridModel[e[i].x][e[i].y].feature={name:"Danger",chance:30},e.splice(i,1)}}},{key:"gridAddHive",value:function(e){var t=Math.floor(Math.random()*e.length);return this.hiveLocation=e[t],this.fullGridModel[this.hiveLocation.x][this.hiveLocation.y].feature={name:"Hive"},this.fullGridModel[this.hiveLocation.x][this.hiveLocation.y].status="Hive",e.splice(t,1),e}},{key:"updateBorderExploreTiles",value:function(e){var t=this.getExploredtiles(e);for(var i in t)this.updateExploreNeighbors(t[i],e)}},{key:"updateExploreNeighbors",value:function(e,t){var i,r,n,o,s,a,l,u,d,c,h,v,f,y,b,g,j=e.xLoc,x=e.yLoc;"Unexplored"===(null===(i=t[j-1])||void 0===i||null===(r=i[x])||void 0===r?void 0:r.status)&&(t[j-1][x].status="BorderExplored"),"Unexplored"===(null===(n=t[j+1])||void 0===n||null===(o=n[x])||void 0===o?void 0:o.status)&&(t[j+1][x].status="BorderExplored"),"Unexplored"===(null===(s=t[j])||void 0===s||null===(a=s[x-1])||void 0===a?void 0:a.status)&&(t[j][x-1].status="BorderExplored"),"Unexplored"===(null===(l=t[j])||void 0===l||null===(u=l[x+1])||void 0===u?void 0:u.status)&&(t[j][x+1].status="BorderExplored"),"Unexplored"===(null===(d=t[j-1])||void 0===d||null===(c=d[x-1])||void 0===c?void 0:c.status)&&(t[j-1][x-1].status="BorderExplored"),"Unexplored"===(null===(h=t[j+1])||void 0===h||null===(v=h[x-1])||void 0===v?void 0:v.status)&&(t[j+1][x-1].status="BorderExplored"),"Unexplored"===(null===(f=t[j-1])||void 0===f||null===(y=f[x+1])||void 0===y?void 0:y.status)&&(t[j-1][x+1].status="BorderExplored"),"Unexplored"===(null===(b=t[j+1])||void 0===b||null===(g=b[x+1])||void 0===g?void 0:g.status)&&(t[j+1][x+1].status="BorderExplored")}},{key:"getExploredtiles",value:function(e){var t=[];for(var i in e)for(var r in e[i])"Explored"!=e[i][r].status&&"Hive"!=e[i][r].status||t.push(e[i][r]);return console.log("ExploredArray",t),t}},{key:"getFoodTiles",value:function(e){var t=[];for(var i in e)for(var r in e[i])"Explored"==e[i][r].status&&"Food"==e[i][r].feature.name&&e[i][r].feature.charges>0&&t.push(e[i][r]);return console.log("food tile array",t),t}},{key:"getHiveLocation",get:function(){return this.hiveLocation}},{key:"setHiveLocation",set:function(e){this.hiveLocation=e}}]),e}(),m=function(){function e(t,i){Object(g.a)(this,e),this.alive=!0,this.key="",this.alive=!0,this.worldGrid=t,this.memory=JSON.parse(JSON.stringify(t.fullGridModel)),this.key=i,this.xLoc=t.hiveLocation.x,this.yLoc=t.hiveLocation.y}return Object(j.a)(e,[{key:"copyMemory",value:function(e){this.memory=JSON.parse(JSON.stringify(e)),console.log("memory after copy",this.memory)}},{key:"moveToTile",value:function(e){var t;this.worldGrid.fullGridModel[this.xLoc][this.yLoc].removeBee();var i=this.worldGrid.fullGridModel[e.xLoc][e.yLoc];return"Danger"===(null===(t=i.feature)||void 0===t?void 0:t.name)&&Math.floor(100*Math.random())<=i.feature.chance?(i.addDeadBee(),!1):(i.addBee(),this.xLoc=e.xLoc,this.yLoc=e.yLoc,!0)}},{key:"explorePhase",value:function(e,t){var i=this.findToExplore();if(!0===e&&this.removeAvoids(i,t),0===i.length)return this.worldGrid.fullGridModel[this.xLoc][this.yLoc];var r=i[Math.floor(Math.random()*i.length)];return!1===this.moveToTile(r)?(this.alive=!1,!1):(this.memory[r.xLoc][r.yLoc].status="Explored",this.worldGrid.updateBorderExploreTiles(this.memory),r)}},{key:"gatherPhase",value:function(e,t){var i=this.worldGrid.getFoodTiles(this.memory);if(!0===e&&this.removeAvoids(i,t),0===i.length)return this.worldGrid.fullGridModel[this.xLoc][this.yLoc];var r=i[Math.floor(Math.random()*i.length)];return!1===this.moveToTile(r)?(this.alive=!1,!1):(this.memory[this.xLoc][this.yLoc].feature.charges--,this.worldGrid.fullGridModel[this.xLoc][this.yLoc].subtractFood(),r)}},{key:"findToExplore",value:function(){var e=[];for(var t in this.memory)for(var i in this.memory[t])"BorderExplored"===this.memory[t][i].status&&e.push(this.memory[t][i]);return e}},{key:"removeAvoids",value:function(e,t){for(var i in t){var r=t[i].xLoc,n=t[i].yLoc;for(var o in e){var s=e[o].xLoc,a=e[o].yLoc;r===s&&n===a&&e.splice(o,1)}}}},{key:"getMemory",value:function(){return this.memory}},{key:"updateMemory",value:function(e){}}]),e}(),O=function(){function e(t,i,r){Object(g.a)(this,e),this.location="",this.beeArray=[],this.unexploredTileArray=[],this.worldGrid="",this.sharingMemory=!0,this.planning=!0,this.location=t,this.numBees=i,this.worldGrid=r,this.hiveMemory=r,this.generateBees()}return Object(j.a)(e,[{key:"generateBees",value:function(){for(var e=0;e<this.numBees;e++)this.beeArray.push(new m(this.worldGrid,e))}},{key:"startPhase",value:function(){for(var e in this.beeArray)this.beeArray[e].alive&&this.beeArray[e].moveToTile(this.worldGrid.fullGridModel[this.location.x][this.location.y])}},{key:"explorePhase",value:function(){var e=[];for(var t in this.beeArray)if(!0===this.beeArray[t].alive){var i=this.beeArray[t].explorePhase(this.planning,e);!0===this.planning&&0!=i&&e.push(i)}for(var r in e)this.worldGrid.fullGridModel[e[r].xLoc][e[r].yLoc].status="Explored"}},{key:"gatherPhase",value:function(){var e=[];for(var t in this.beeArray)if(this.beeArray[t].alive){var i=this.beeArray[t].gatherPhase(this.planning,e);i.feature.charges<1&&e.push(i)}}},{key:"syncPhase",value:function(){for(var e in this.beeArray)this.beeArray[e].alive&&this.beeArray[e].moveToTile(this.worldGrid.fullGridModel[this.location.x][this.location.y]);this.sharingMemory&&this.syncBeeMemories()}},{key:"syncBeeMemories",value:function(){var e=this;for(var t in this.beeArray)if(!0===this.beeArray[t].alive){var i=this.beeArray[t].getMemory();this.syncToHiveMemory(i)}this.sharingMemory&&this.beeArray.map((function(t){return e.syncToBeeMemory(t)}))}},{key:"syncToHiveMemory",value:function(e){for(var t in e)for(var i in e[t])"Explored"===e[t][i].status&&(this.hiveMemory.fullGridModel[t][i].status="Explored")}},{key:"syncToBeeMemory",value:function(e){e.copyMemory(this.hiveMemory.fullGridModel)}}]),e}(),k=function(){function e(t,i){Object(g.a)(this,e),this.turnTracker=0,this.subTurnCycle=["Start","Explore","Sync","Gather"],this.endCase=!1,this.subTurnCycleActive=0,this.worldGrid=new p(t),this.hive=new O(this.worldGrid.hiveLocation,i.numBees,this.worldGrid),this.gameplayOptions=i,this.turnDisplay=this.updateTurnDisplay()}return Object(j.a)(e,[{key:"advanceTurn",value:function(){this.subTurnCycleActive++,this.subTurnCycleActive==this.subTurnCycle.length&&(this.turnTracker++,this.subTurnCycleActive-=this.subTurnCycle.length),this.turnDisplay=this.updateTurnDisplay(),console.log("New turn display",this.turnDisplay),this.executeTurn(this.subTurnCycle[this.subTurnCycleActive])}},{key:"updateTurnDisplay",value:function(){var e="Turn: ";return e+=this.turnTracker+", "+this.subTurnCycle[this.subTurnCycleActive]}},{key:"executeTurn",value:function(e){switch(e){case"Start":this.startStage();break;case"Explore":this.exploreStage();break;case"Sync":this.syncStage();break;case"Gather":this.gatherStage();break;default:console.log("incorrect stage")}}},{key:"startStage",value:function(){this.endCase=this.checkEndCases(),!1!==this.endCase&&console.log("endCase",this.endCase),this.hive.startPhase()}},{key:"exploreStage",value:function(){this.hive.explorePhase(),this.worldGrid.updateBorderExploreTiles(this.worldGrid.fullGridModel)}},{key:"gatherStage",value:function(){this.hive.gatherPhase()}},{key:"syncStage",value:function(){this.hive.syncPhase()}},{key:"checkEndCases",value:function(){if(!this.checkBeeLife())return"Bee Death";for(var e in this.worldGrid.fullGridModel)for(var t in this.worldGrid.fullGridModel[e])if("Unexplored"===this.worldGrid.fullGridModel[e][t].status||"BorderExplored"===this.worldGrid.fullGridModel[e][t].status)return!1;return"Bee victory"}},{key:"checkBeeLife",value:function(){for(var e in this.hive.beeArray)if(this.hive.beeArray[e].alive)return!0;return!1}}]),e}(),B=i(33),M=i(140),C=i(138),G=i(129),L=i(139);var w=function(e){var t=Object(r.useState)(e.settings),i=Object(l.a)(t,2),n=i[0],o=i[1];function s(e){console.log(e.target.name),o(Object(a.a)(Object(a.a)({},n),{},Object(B.a)({},e.target.name,e.target.checked)))}function u(t){o(Object(a.a)(Object(a.a)({},n),{},Object(B.a)({},t.target.name,parseInt(t.target.value)))),e.getSettings(Object(a.a)(Object(a.a)({},n),{},Object(B.a)({},t.target.name,parseInt(t.target.value))))}return Object(h.jsxs)("div",{style:{margin:"10px"},children:[Object(h.jsx)("p",{children:"Settings:"}),Object(h.jsxs)(M.a,{children:[Object(h.jsx)("div",{children:Object(h.jsx)(C.a,{style:{margin:"10px"},required:!0,id:"foodInput",label:"Food Instances",defaultValue:e.settings.numFood,variant:"outlined",onChange:u,name:"numFood",autoComplete:"off"})}),Object(h.jsx)("div",{style:{margin:"10px"},children:Object(h.jsx)(C.a,{id:"dangerInput",label:"Danger Instances",defaultValue:e.settings.numDanger,variant:"outlined",name:"numDanger",onChange:u,autoComplete:"off"})}),Object(h.jsx)("div",{style:{margin:"10px"},children:Object(h.jsx)(C.a,{id:"beeInput",label:"Number of Bees",defaultValue:e.settings.numBees,variant:"outlined",name:"numBees",onChange:u,autoComplete:"off"})}),Object(h.jsx)("div",{style:{margin:"10px"},children:Object(h.jsx)(C.a,{required:!0,id:"heightInput",label:"Map Height",defaultValue:e.settings.height,variant:"outlined",onChange:u,name:"height",autoComplete:"off"})}),Object(h.jsx)("div",{style:{margin:"10px"},children:Object(h.jsx)(C.a,{required:!0,id:"widthInput",defaultValue:e.settings.width,label:"Map Width",variant:"outlined",onChange:u,name:"width",autoComplete:"off"})}),Object(h.jsxs)("div",{style:{color:"black"},children:[Object(h.jsx)("div",{children:Object(h.jsx)(G.a,{control:Object(h.jsx)(L.a,{checked:e.settings.syncing,onChange:s,name:"sharing",color:"primary"}),label:"Information Sharing"})})," ",Object(h.jsx)("div",{children:Object(h.jsx)(G.a,{control:Object(h.jsx)(L.a,{checked:e.settings.planning,onChange:s,name:"planning",color:"primary"}),label:"Planning"})})]})]})]})},T=i(136),A=i(137),S=i(130),D=i(134),E=i(132),F=i(133),P=i(131),I=i(89),H=n.a.forwardRef((function(e,t){return Object(h.jsx)(I.a,Object(a.a)({direction:"up",ref:t},e))}));var N=function(e){var t=n.a.useState(e.open),i=Object(l.a)(t,2),r=i[0],o=i[1],s=function(){o(!1)};return Object(h.jsxs)(S.a,{open:r,TransitionComponent:H,keepMounted:!0,onClose:s,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(h.jsx)(P.a,{id:"alert-dialog-slide-title",children:"End of Simulation"}),Object(h.jsx)(E.a,{children:Object(h.jsxs)(F.a,{id:"alert-dialog-slide-description",children:["End case reached: ",e.endCase]})}),Object(h.jsx)(D.a,{children:Object(h.jsx)(b.a,{onClick:s,color:"primary",children:"Okay"})})]})},U=Object(T.a)({list:{width:250},fullList:{width:"auto"}});var R=function(){U();var e=Object(r.useState)(),t=Object(l.a)(e,2),i=t[0],n=(t[1],Object(r.useRef)(i),Object(r.useState)()),o=Object(l.a)(n,2),s=o[0],u=o[1],d=Object(r.useRef)(s),c=Object(r.useState)(),v=Object(l.a)(c,2),f=v[0],g=v[1],j=Object(r.useRef)(f),x=Object(r.useState)([]),p=Object(l.a)(x,2),m=p[0],O=(p[1],Object(r.useRef)(m)),B=Object(r.useState)({height:10,width:10,numDanger:3,numFood:3,seed:"Default",numBees:3,planning:!0,syncing:!0}),M=Object(l.a)(B,2),C=M[0],G=M[1],L=Object(r.useState)({left:!1}),T=Object(l.a)(L,2),S=T[0],D=T[1],E=function(e){return function(){D(Object(a.a)(Object(a.a)({},S),{},{left:e}))}};function F(){console.log("settings for gen",C);var e,t={height:C.height,width:C.width,numDanger:C.numDanger,numFood:C.numFood,seed:C.seed},i={numBees:C.numBees,planning:!0,syncing:!0};e=new k(t,i),d.current=e,u(e)}function P(){var e,t,i;(console.log("advancing turn"),d.current.endCase)?I():(null===d||void 0===d||null===(e=d.current)||void 0===e||e.advanceTurn(),i=null===d||void 0===d||null===(t=d.current)||void 0===t?void 0:t.turnDisplay,j.current=i,g(i))}function I(){for(var e in O.current)clearInterval(O.current[e]),O.current.pop(e)}return Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{children:s?Object(h.jsxs)("div",{children:[Object(h.jsx)("p",{children:s.turnDisplay}),Object(h.jsx)(y,{gridModel:s.worldGrid}),Object(h.jsx)(b.a,{style:{color:"white"},onClick:function(){return P()},children:"Advance Turn"}),Object(h.jsx)(b.a,{style:{color:"white"},onClick:function(){O.current.length<1?O.current.push(setInterval(P,1e3)):I()},children:"Toggle AutoRun"})]}):Object(h.jsx)(b.a,{style:{color:"white"},onClick:function(){return F()},children:"Generate World"})}),(null===s||void 0===s?void 0:s.endCase)?Object(h.jsx)(N,{open:!0,endCase:s.endCase}):Object(h.jsx)("div",{}),Object(h.jsx)(b.a,{style:{color:"white"},onClick:E(!0),children:"Settings"}),Object(h.jsx)(A.a,{open:S.left,onClose:E(!1),children:Object(h.jsxs)("div",{children:[Object(h.jsx)(w,{getSettings:function(e){G(e)},settings:C}),Object(h.jsx)(b.a,{style:{color:"white"},onClick:E(!1),children:"Close Settings"})]})}),Object(h.jsx)(b.a,{style:{color:"white"},onClick:function(){return I(),void F()},children:"Reset"})]})};var J=function(){return Object(h.jsx)("div",{className:"App",children:Object(h.jsx)("header",{className:"App-header",children:Object(h.jsx)(R,{})})})},z=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,141)).then((function(t){var i=t.getCLS,r=t.getFID,n=t.getFCP,o=t.getLCP,s=t.getTTFB;i(e),r(e),n(e),o(e),s(e)}))};s.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(J,{})}),document.getElementById("root")),z()}},[[88,1,2]]]);
//# sourceMappingURL=main.ca45bacb.chunk.js.map